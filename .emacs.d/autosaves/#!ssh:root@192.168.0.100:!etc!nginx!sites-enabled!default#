server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name www.zenocyne.com;
    index index.html

    location / {
        return 301 https://zenocyne.com$request_url;
    }
}

server {
    listen 443 ssl;
    listen [::]:443 ssl ipv6only=on;
    server_name www.zenocyne.com;
    root /var/www/html;
    index index.php index.html index.htm index.nginx-debian.html;

    location / {
 	try_files $uri $uri/ =404;
    }

    location ~ \.php$ {
 	include snippets/fastcgi-php.conf;
 	fastcgi_pass unix:/var/run/php5-fpm.sock;
    }

    location ~ /\.ht {
 	deny all;
    }

    error_page 404 /404.html;

    location = /404.html {
 	root /var/www/error/;
 	internal;
    }

    error_page 403 /403.html;

    location = /403.html {
 	root /var/www/error/;
 	internal;
    }

    ssl on;
    ssl_certificate /etc/letsencrypt/live/www.zenocyne.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/www.zenocyne.com/privkey.pem;
    
    # ssl_stapling on;
    # ssl_stapling_verify on;
    # ssl_trusted_certificate /etc/letsencrypt/live/www.zenocyne.com/fullchain.pem0;

    # resolver 1.1.1.1 8.8.8.8 8.8.4.4 valid-300s;
    # resolver_timeout 3s;

    # ssl_session_tickets on;
    # ssl_session_ticket_key /etc/letsencrypt/ticket.key;

    include /etc/letsencrypt/options-ssl-nginx.conf;
    
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

     include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
     ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}

# server {
#     root /var/www/html;
#     index index.php index.html index.htm index.nginx-debian.html;
#     server_name www.zenocyne.com;

#     location / {
# 	try_files $uri $uri/ =404;
#     }

#     location ~ \.php$ {
# 	include snippets/fastcgi-php.conf;
# 	fastcgi_pass unix:/var/run/php5-fpm.sock;
#     }

#     location ~ /\.ht {
# 	deny all;
#     }

#     error_page 404 /404.html;

#     location = /404.html {
# 	root /var/www/error/;
# 	internal;
#     }

#     error_page 403 /403.html;

#     location = /403.html {
# 	root /var/www/error/;
# 	internal;
#     }

#     listen [::]:443 ssl ipv6only=on; # managed by Certbot
#     listen 443 ssl; # managed by Certbot
#     ssl_certificate /etc/letsencrypt/live/www.zenocyne.com/fullchain.pem; # managed by Certbot
#     ssl_certificate_key /etc/letsencrypt/live/www.zenocyne.com/privkey.pem; # managed by Certbot
#     include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
#     ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

# }


# server {
#     index index.php index.html index.htm index.nginx-debian.html;
#     if ($host = www.zenocyne.com) {
#         return 301 https://$host$request_uri;
#         } # managed by Certbot


#         listen 80 default_server;
#         listen [::]:80 default_server;

#         server_name www.zenocyne.com;
#         return 404; # managed by Certbot


# }
