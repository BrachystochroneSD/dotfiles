#!/bin/expect

cd ~/.github/ionicApp/aurorApp/

ionic cordova build --release android &&rm ~/.github/ionicApp/aurorApp/platforms/android/app/build/outputs/apk/release/AurorApp.apk

jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore ~/.github/ionicApp/my-key.keystore ~/.github/ionicApp/aurorApp/platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk SDALIAS

expect "Enter Passphrase for keystore:"
send $1

zipalign -v 4 ~/.github/ionicApp/aurorApp/platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk ~/.github/ionicApp/aurorApp/platforms/android/app/build/outputs/apk/release/AurorApp.apk 

scp ~/.github/ionicApp/aurorApp/platforms/android/app/build/outputs/apk/release/AurorApp.apk root@192.168.0.100:/var/www/html/logosite/secretowl/aurorApp/AurorApp.apk

expect "root@192.168.0.100's password:"
send $2
