import { Component } from '@angular/core';
import { NavController, NavParams, AlertController } from 'ionic-angular';
import { MaindbProvider } from '../../providers/maindb/maindb';

@Component({
    selector: 'page-cours',
    templateUrl: 'coursPage.html'
})
export class CoursPage {
    selectedItem: any;
    description: string;
    nos: string[];
    testCheckboxOpen: boolean;
    checkedbool: boolean;
    constructor(public navCtrl: NavController, public navParams: NavParams, public alertCtrl: AlertController, public maindbProvider: MaindbProvider) {
	this.selectedItem = navParams.get('item');
	this.nos=['No','Heck no', 'Dear god No', 'No way!', 'Uh,no.', 'Negatory!', 'Arrh Noooo', 'Nyet', 'Nope', 'Nah', 'Nein', 'Nichts da!', 'I\'m afraid not.'];
	maindbProvider.getcours_descr(this.selectedItem.title).then((val) => {
	    this.description = val;
	});
    }
    
    doCheckbox(date, UIX, weight, ischecked) {
	let alert = this.alertCtrl.create();
	alert.setTitle('T\'as été au cours ?');

	alert.addInput({
	    type: 'radio',
	    label: 'Oui',
	    value: 'yes',
	    checked: !ischecked
	});

	alert.addInput({
	    type: 'radio',
	    label: this.nos[Math.floor(Math.random() * this.nos.length)],
	    value: 'no',
	    checked: ischecked
	});

	alert.addButton('Cancel');
	alert.addButton({
	    text: 'Okay',
	    handler: data => {
		this.testCheckboxOpen = false;
		if( data == 'no' ){
		    this.maindbProvider.addsechecours(UIX,date,weight);
		} else {
		    this.maindbProvider.removesechecours(UIX,date);		    
		}
	    }
	});
	alert.present().then(() => {
	    this.testCheckboxOpen = true;
	});
    }

    showEditPrompt() {
	const prompt = this.alertCtrl.create({
	    title: 'Edit Description',
	    message: "Est-ce un cours de merde ? Un cours pas trop chiant ? Parles-en-moi, je suis tout ouïe",
	    inputs: [
		{
		    name: 'description',
		    placeholder: 'Description'
		},
	    ],
	    buttons: [
		{
		    text: 'Cancel',
		    handler: data => {
			console.log('Cancel clicked');
		    }
		},
		{
		    text: 'Save',
		    handler: data => {
			let id=this.selectedItem.title;
			let descript=data.description;
			this.maindbProvider.setcours_descr(id,descript);
		    }
		}
	    ]
	});
	prompt.present();
    }
}
