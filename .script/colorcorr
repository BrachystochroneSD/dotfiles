#!/bin/bash

# This script change the base16-eval-theme for emacs generated by pywal with the template. Because the base color is too bright. It also copy the templates for dmenu shits for homogenous colors

#color correction for emacs

hex=$(awk '/base02/' ~/.config/wpg/formats/base16-wal-theme.el | cut -d\" -f2)

r=$(echo 0$(printf '%x' $(( $((0x${hex:1:2})) / 2 ))))
r=${r: -2}
g=$(echo 0$(printf '%x' $(( $((0x${hex:3:2})) / 2 ))))
g=${g: -2}
b=$(echo 0$(printf '%x' $(( $((0x${hex:5:2})) / 2 ))))
b=${b: -2}

sed "/base02/c\                                         :base02 \"#$r$g$b\"" ~/.config/wpg/formats/base16-wal-theme.el > ~/.emacs.d/base16-wal-theme.el

# templates for keepmenu, networkdmenu and cava

cp ~/.config/wpg/formats/keepmenuconf ~/.config/keepmenu/config.ini
cp ~/.config/wpg/formats/nm_dmenu ~/.config/networkmanager-dmenu/config.ini
cp ~/.config/wpg/formats/cavaconf ~/.config/cava/config

dunst &
